[gd_scene load_steps=9 format=3 uid="uid://dqwg7lnsklc6m"]

[ext_resource type="Script" path="res://space_challenge/Optimization_Algorithms/EvolutionStrategy.gd" id="1_8sdsy"]
[ext_resource type="Texture2D" uid="uid://bpxcnqh5s1xr4" path="res://external_assets/SpaceSkyMap.png" id="2_qu7v3"]
[ext_resource type="PackedScene" uid="uid://ctluyj2ir5gjj" path="res://Ring_Test/ring_manager.tscn" id="3_8g4nr"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_rmgya"]
panorama = ExtResource("2_qu7v3")

[sub_resource type="Sky" id="Sky_tqprb"]
sky_material = SubResource("PanoramaSkyMaterial_rmgya")

[sub_resource type="Environment" id="Environment_3y7q2"]
background_mode = 2
sky = SubResource("Sky_tqprb")

[sub_resource type="GDScript" id="GDScript_1o5w3"]
script/source = "extends Button


func _on_pressed():
	get_parent().get_parent().spaceships[0].nn.saveLayers()
	
	
	
"

[sub_resource type="GDScript" id="GDScript_4s13q"]
script/source = "extends Button
var history = []

func _on_pressed():
	# Take the space's history:
	history = get_parent().get_parent().history
	var file = FileAccess.open(\"res://Data/reward_convergency.txt\", FileAccess.WRITE)
	for reward in history:
		file.store_line(str(reward))

	# The file will be closed automatically when gets out of the scope
"

[node name="space" type="Node3D"]
script = ExtResource("1_8sdsy")
spaceship_scene = "res://space_challenge/Spaceships(Agents)/spaceship.tscn"

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(0.915838, 0, 0.401548, 0, 1, 0, -0.401548, 0, 0.915838, 12.138, 4.392, 20.74)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.875042, -0.418578, 0.24309, 0, 0.502205, 0.864748, -0.484046, -0.756692, 0.439451, 0, 11.0538, 7.25927)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_3y7q2")

[node name="RingManager" parent="." instance=ExtResource("3_8g4nr")]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="SaveBestNN" type="Button" parent="CanvasLayer"]
offset_right = 8.0
offset_bottom = 8.0
text = "Save Best NN
"
script = SubResource("GDScript_1o5w3")

[node name="ExportConvergency" type="Button" parent="CanvasLayer"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -215.0
offset_bottom = 31.0
grow_horizontal = 0
text = "Export Convergency Graph"
script = SubResource("GDScript_4s13q")

[connection signal="pressed" from="CanvasLayer/SaveBestNN" to="CanvasLayer/SaveBestNN" method="_on_pressed"]
[connection signal="pressed" from="CanvasLayer/ExportConvergency" to="CanvasLayer/ExportConvergency" method="_on_pressed"]
